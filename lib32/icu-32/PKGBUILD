# description	: International Components for Unicode
# depends	: icu

pkgname=icu-32
_pkgname=icu
pkgver=77.1
vrs=$(echo $pkgver | sed 's/\./_/g')
_version=$(echo $pkgver | sed 's/\./-/g')
pkgrel=1
source=(https://github.com/unicode-org/icu/releases/download/release-${_version}/icu4c-$vrs-src.tgz)

build() {
    cd ${_pkgname}/source

	export CC="gcc -m32 -mstackrealign"
	export CXX="g++ -m32 -mstackrealign"
	export PKG_CONFIG_LIBDIR="/usr/lib32/pkgconfig"

    ./configure \
        --prefix=/usr \
        --libdir=/usr/lib32 \
        --host=i686-pc-linux-gnu 
    make
    make DESTDIR="$PWD"/DESTDIR install
    rm -fr DESTDIR/usr/{bin,sbin,share,include}
    cp -Rv DESTDIR/* "$pkgdir"/
}