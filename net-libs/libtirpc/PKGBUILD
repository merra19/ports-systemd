# description	: Transport Independent RPC library (SunRPC replacement)
# depends	: xz

pkgname=libtirpc
pkgver=1.3.6
pkgrel=1
source=(https://downloads.sourceforge.net/libtirpc/$pkgname-$pkgver.tar.bz2
        https://www.linuxfromscratch.org/patches/blfs/12.4/libtirpc-1.3.6-gcc15_fixes-1.patch)
backup=(etc/netconfig)

build() {
    cd $pkgname-$pkgver

    # First, apply a patch to make the package compatible with gcc-15
    patch -Np1 -i ../libtirpc-1.3.6-gcc15_fixes-1.patch
    
    ./configure \
        --prefix=/usr \
        --sysconfdir=/etc \
        --disable-static \
        --disable-gssapi 
    make CC="gcc -std=gnu17"
    make DESTDIR="$pkgdir" install
}