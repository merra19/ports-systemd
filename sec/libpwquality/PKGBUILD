# description	: Library for password quality checking and generating random passwords
# depends	: cracklib pam

pkgname=libpwquality
pkgver=1.4.5
pkgrel=1
options=(!lto)
source=(https://github.com/libpwquality/libpwquality/releases/download/$pkgname-$pkgver/$pkgname-$pkgver.tar.bz2
        system-password2)

build() {
	cd $pkgname-$pkgver

    ./configure \
        --prefix=/usr \
        --disable-static \
        --enable-pam \
        --with-securedir=/usr/lib/security \
        --disable-python-bindings \
        --with-python-binary=python3 
    make
    gpep517 build-wheel --wheel-dir .dist --output-fd 3 3>&1 >&2
    make DESTDIR="$pkgdir" install
    python3 -m installer -d "$pkgdir" .dist/*.whl
}
