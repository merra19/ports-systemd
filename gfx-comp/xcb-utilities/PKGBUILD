# description	: Provide extensions that developers can use when making X Window software
# depends	: xcursor-themes

pkgname=xcb-utilities
pkgver=1.0.0
pkgrel=2
source=()
noextract=(
    xcb-util-image-0.4.1.tar.xz
    xcb-util-keysyms-0.4.1.tar.xz
    xcb-util-renderutil-0.3.10.tar.xz
    xcb-util-wm-0.4.2.tar.xz
    xcb-util-cursor-0.1.5.tar.xz
    )

for listsrc in ${noextract[@]};do
    source=(${source[@]} https://xorg.freedesktop.org/archive/individual/lib/$listsrc)
done

build() {
    export PKG_CONFIG_PATH="$pkgdir/usr/lib/pkgconfig:/usr/lib/pkgconfig:/usr/share/pkgconfig/"
    export PKG_CONFIG_LIBDIR="$pkgdir/usr/lib/pkgconfig:/usr/lib/pkgconfig:/usr/share/pkgconfig/"

    export CFLAGS="$CFLAGS -L$pkgdir/usr/lib -I$pkgdir/usr/include"

    for package in ${noextract[@]}
    do
        packagedir=${package%.tar.?z*}
        tar -xf $package
        cd $packagedir

        ./configure \
            --prefix=/usr \
            --sysconfdir=/etc \
            --localstatedir=/var \
            --disable-static
        LD_LIBRARY_PATH="$pkgdir/usr/lib" make
        make DESTDIR="$pkgdir" install
        cd ..
        rm -rf $packagedir
    done  
}
