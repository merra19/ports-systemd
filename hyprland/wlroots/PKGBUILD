# description	: Pluggable, composable, unopinionated modules for building a Wayland compositor
# depends	: wayland libglvnd mesa libdrm libxkbcommon pixman lcms2
# depends	: libdisplay-info hwdata libliftoff libinput glslang 
# depends	: vulkan-headers vulkan-loader libxcb xcb-utilities
# depends	: xwayland wayland-protocols seatd xcb-util-errors systemd

pkgname=wlroots
pkgver=0.19.0
pkgrel=1
source=(https://gitlab.freedesktop.org/wlroots/wlroots/-/releases/$pkgver/downloads/$pkgname-$pkgver.tar.gz
        Revert-layer-shell-error-on-0-dimension-without-anch.patch)

build() {
    cd $pkgname-$pkgver

    patch -Np1 -i ../Revert-layer-shell-error-on-0-dimension-without-anch.patch

	meson setup \
        --prefix=/usr \
        --buildtype=plain \
        --auto-features=enabled \
        build
	ninja -C build
    DESTDIR="$pkgdir" ninja install -C build
}