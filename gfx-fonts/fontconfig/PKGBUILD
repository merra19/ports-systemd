# description	: A library for configuring and customizing font access
# depends	: freetype expat gperf json-c libxml2

pkgname=fontconfig
pkgver=2.17.1
pkgrel=1
source=(https://gitlab.freedesktop.org/api/v4/projects/890/packages/generic/fontconfig/$pkgver/$pkgname-$pkgver.tar.xz
        $pkgname.hooks)
backup=(etc/fonts/fonts.conf)

build() {
    cd $pkgname-$pkgver

    autoreconf -fiv
    ./configure \
        --prefix=/usr \
        --sysconfdir=/etc \
        --localstatedir=/var \
		--disable-docs \
        --docdir=/usr/share/doc/$pkgname-$pkgver
    make
    make DESTDIR="$pkgdir" install
    
    install -v -dm755 "$pkgdir"/usr/share/{man/man{1,3,5},doc/$pkgname-$pkgver} &&
    install -v -m644 fc-*/*.1  "$pkgdir"/usr/share/man/man1 &&
    install -v -m644 doc/*.3   "$pkgdir"/usr/share/man/man3 &&
    install -v -m644 doc/fonts-conf.5 "$pkgdir"/usr/share/man/man5 &&
    install -v -m644 doc/*.{pdf,sgml,txt,html} /"$pkgdir"/usr/share/doc/$pkgname-$pkgver

    install -Dm755 "$srcdir"/$pkgname.hooks "$pkgdir"/usr/share/blfs-bootscripts/hooks/$pkgname.hooks
}