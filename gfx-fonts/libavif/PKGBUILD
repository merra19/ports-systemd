# description	: Library for encoding and decoding .avif files
# depends	: glibc libaom glib gdk-pixbuf cmake

pkgname=libavif
pkgver=1.3.0
pkgrel=1
source=(https://github.com/AOMediaCodec/libavif/archive/v$pkgver/$pkgname-$pkgver.tar.gz)

build() {
	cd $pkgname-$pkgver

    cmake -B build \
        -D CMAKE_INSTALL_PREFIX=/usr \
        -D CMAKE_BUILD_TYPE=Release \
        -D AVIF_CODEC_AOM=SYSTEM \
        -D AVIF_BUILD_GDK_PIXBUF=ON \
        -D AVIF_LIBYUV=OFF \
        -G Ninja
    ninja -C build
    DESTDIR="$pkgdir" ninja install -C build
}