# description	: Scalable Vector Graphics (SVG) rendering library
# depends	: cairo glib gdk-pixbuf pango gobject-introspection vala
# depends	: cargo-c dav1d

pkgname=librsvg
pkgver=2.61.0
pkgrel=1
source=(https://download.gnome.org/sources/librsvg/${pkgver%.*}/$pkgname-$pkgver.tar.xz)

build() {
	cd $pkgname-$pkgver

    mkdir -p .cargo

#    cat  >> .cargo/config.toml << "EOF" 
#[target.x86_64-unknown-linux-gnu]
#linker = "clang"
#EOF

    cp doc/meson.build doc/meson.build2
    # Fix the installation path of the API documentation
    sed -e "/OUTDIR/s|,| / 'librsvg-$pkgver', '--no-namespace-dir',|" \
        -e "/output/s|Rsvg-2.0|librsvg-$pkgver|"  \
        -i doc/meson.build

    meson setup \
        --prefix=/usr \
        --buildtype=plain \
        -D docs=disabled \
        build
    ninja -C build
    DESTDIR="$pkgdir" ninja install -C build
}
