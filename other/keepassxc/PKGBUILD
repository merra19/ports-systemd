# description	: KeePassXC - KeePass Cross-platform Community Editio
# depends	: glibc argon2 botan qt5 libqrencode zlib zlib-minizip
# depends	: hicolor-icon-theme libusb asciidoctor cmake

pkgname=keepassxc
pkgver=2.7.10
pkgrel=1
options=(!lto)
source=(https://github.com/keepassxreboot/keepassxc/releases/download/$pkgver/$pkgname-$pkgver-src.tar.xz)

build() {
	cd $pkgname-$pkgver
	
    cmake -B build -G Ninja \
        -D CMAKE_INSTALL_PREFIX=/usr \
        -D CMAKE_BUILD_TYPE=Release \
        -D CMAKE_INSTALL_LIBDIR=lib \
        -D KEEPASSXC_BUILD_TYPE=Release \
        -D WITH_XC_BROWSER=ON \
        -D WITH_XC_BROWSER_PASSKEYS=ON \
        -D WITH_XC_SSHAGENT=ON \
        -D WITH_XC_FDOSECRETS=ON \
        -D WITH_GUI_TESTS=ON \
        -D WITH_XC_UPDATECHECK=OFF \
        -D WITH_XC_YUBIKEY=OFF
    ninja -C build
	DESTDIR="$pkgdir" ninja install -C build
}