# description	: Boost Libraries for C++"
# depends	: zlib bzip2 which icu python xz zstd py3-numpy

pkgname=boost
pkgver=1.89.0
vrsn="$(echo $pkgver | sed 's/\./_/g')"
pkgrel=1
options=(!lto)
source=(https://github.com/boostorg/boost/releases/download/$pkgname-$pkgver/$pkgname-$pkgver-b2-nodocs.tar.xz)

build() {
	cd $pkgname-$pkgver

    case $(uname -m) in
    i?86)
        sed -e "s/defined(__MINGW32__)/& || defined(__i386__)/" \
            -i ./libs/stacktrace/src/exception_headers.h ;;
    esac

	./bootstrap.sh --prefix=/usr --with-python=python3
	./b2 stage -j$jobs threading=multi link=shared
    ./b2 install --prefix="$pkgdir"/usr threading=multi link=shared
}