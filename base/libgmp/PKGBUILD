# description	: Library for arbitrary-precision arithmetic on different type of numbers
# depends	: m4 xz

pkgname=libgmp
pkgver=6.3.0
pkgrel=1
source=(https://mirror.lyrahosting.com/gnu/gmp/gmp-$pkgver.tar.xz)

build() {
    cd ${pkgname#lib}-$pkgver

    # First, make an adjustment for compatibility with gcc-15 and later
    sed -i '/long long t1;/,+1s/()/(...)/' configure

    LDFLAGS+=' -Wl,-z,shstk' \
    ./configure \
        --prefix=/usr \
        --enable-cxx \
        --disable-static \
        --docdir=/usr/share/doc/${pkgname#lib}-$pkgver
    make
    make html
    make DESTDIR="$pkgdir" install install-html
}
