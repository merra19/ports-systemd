# description	: Sources for time zone and daylight saving time data
# depends	: linux-api-headers

pkgname=tzdata
pkgver=2025b
pkgrel=1
source=(https://www.iana.org/time-zones/repository/releases/tzdata$pkgver.tar.gz
        https://www.iana.org/time-zones/repository/releases/tzcode$pkgver.tar.gz)

build() {
    sed -i "s:sbin:bin:g" Makefile
    make CFLAGS="$CFLAGS -DHAVE_GETTEXT=0 -DTZDEFAULT='\"/etc/localtime\"'"
    make TZDIR=zoneinfo zones

    mkdir -p "$pkgdir"/usr/share/zoneinfo
    cp -a zoneinfo "$pkgdir"/usr/share/zoneinfo/posix
    cp -al "$pkgdir"/usr/share/zoneinfo/posix/. "$pkgdir"/usr/share/zoneinfo
    cp -a zoneinfo-leaps "$pkgdir"/usr/share/zoneinfo/right
    install -m 644 zone1970.tab "$pkgdir"/usr/share/zoneinfo/zone1970.tab
    install -m 644 iso3166.tab "$pkgdir"/usr/share/zoneinfo/iso3166.tab
    install -m 644 zone.tab    "$pkgdir"/usr/share/zoneinfo/zone.tab
}
