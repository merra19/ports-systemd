# description	: A fast and easy-to-use tool for creating status bars
# depends	: python xcb-proto libuv fontconfig freetype xorg-proto
# depends	: cairo libxcb xcb-util xcb-utilities xcb-util-xrm curl
# depends	: alsa-lib libnl pulseaudio ttf-nerd-fonts-symbols cmake
# depends	: wireplumber ttf-font-awesome 

pkgname=polybar
pkgver=3.7.2
pkgrel=1
source=(https://github.com/polybar/polybar/releases/download/$pkgver/$pkgname-$pkgver.tar.gz
		polybar-3.7.2-gcc15-cstdint-includes.patch)

build() {
    cd $pkgname-$pkgver

	patch -Np1 -i ../polybar-3.7.2-gcc15-cstdint-includes.patch

	cmake -B build \
        -D CMAKE_INSTALL_PREFIX=/usr \
		-D CMAKE_BUILD_TYPE=Release \
		-D ENABLE_ALSA=ON \
		-D ENABLE_CURL=ON \
		-D BUILD_DOC=OFF \
		-D ENABLE_I3=OFF \
		-D BUILD_POLYBAR_MSG=ON \
		-D ENABLE_MPD=OFF \
		-D ENABLE_NETWORK=ON \
		-D ENABLE_PULSEAUDIO=ON \
		-D ENABLE_CCACHE=OFF \
		-D CMAKE_INSTALL_SYSCONFDIR="/etc/"
	make -C build
    make DESTDIR="$pkgdir" install -C build
}
