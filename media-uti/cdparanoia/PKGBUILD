# description	: An audio CD extraction application
# depends	: libtool autoconf automake linux-api-headers

pkgname=cdparanoia
pkgver=10.2
pkgrel=14
source=(https://downloads.xiph.org/releases/cdparanoia/cdparanoia-III-$pkgver.src.tgz
        format-security.patch gcc.patch
		https://www.linuxfromscratch.org/patches/blfs/12.4/cdparanoia-III-10.2-gcc_fixes-1.patch)

build() {
	cd cdparanoia-III-$pkgver

	patch -Np1 -i ../cdparanoia-III-10.2-gcc_fixes-1.patch
	
	./configure \
		--prefix=/usr \
		--sysconfdir=/etc \
		--mandir=/usr/share/man \
		--infodir=/usr/share/info
	make -j1
    make prefix="$pkgdir"/usr MANDIR="$pkgdir"/usr/share/man install

    chmod -v 755 "$pkgdir"/usr/lib/libcdda_*.so.0.$pkgver
    rm -fv "$pkgdir"/usr/lib/libcdda_*.a
}