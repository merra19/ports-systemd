# description	: OpenCL ICD Bindings
# depends	: glibc ruby mesa xmlto py3-asciidoc opencl-headers

pkgname=opencl-loader
_pkgname=ocl-icd
pkgver=2.3.3
pkgrel=1
source=($_pkgname-$pkgver.tar.gz::https://github.com/OCL-dev/${_pkgname}/archive/v${pkgver}.tar.gz)

build() {
    cd "$srcdir/$_pkgname-$pkgver"
    
    autoreconf -fiv

    CFLAGS+=' -fcommon' # https://wiki.gentoo.org/wiki/Gcc_10_porting_notes/fno_common
    ./configure --prefix=/usr
    make
    make DESTDIR="$pkgdir/" install
}