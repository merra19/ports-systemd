# description	: Simple passphrase entry dialogs which utilize the Assuan protocol
# depends	: libassuan libgpg-error ncurses libsecret fltk

pkgname=pinentry
pkgver=1.3.2
pkgrel=1
options=(!lto)
source=( https://www.gnupg.org/ftp/gcrypt/$pkgname/$pkgname-$pkgver.tar.bz2)

build() {
	cd $pkgname-$pkgver

    # make configure consistent with fltk-1.4.1:
    sed -i "/FLTK 1/s/3/4/" configure   &&
    sed -i '14462 s/1.3/1.4/' configure

    CFLAGS+=" -fPIC"
    CXXFLAGS+=" -fPIC"

	./configure \
        --prefix=/usr \
        --enable-pinentry-tty \
        --disable-pinentry-qt5 
	make
    make DESTDIR="$pkgdir" install
}