# description	: Libraries for cryptographic UIs and accessing PKCS#11 modules
# depends	: glib gobject-introspection libgcrypt p11-kit libsecret 
# depends	: gnupg gnutls gettext pkgconf vala gtk4 libxslt openssh

pkgname=gcr4
_pkgname=gcr
pkgver=4.4.0.1
pkgrel=1
source=(https://download.gnome.org/sources/gcr/${pkgver%.*.*}/${_pkgname}-$pkgver.tar.xz)

build() {
    cd ${_pkgname}-$pkgver

	meson setup \
        --prefix=/usr \
        --buildtype=plain \
        -D gtk_doc=false \
        -D ssh_agent="$(scratch isinstalled openssh && echo "true" || echo "false")" \
        -D gtk4="$(scratch isinstalled gtk4 && echo "true" || echo "false")" \
        build
	ninja -C build
    DESTDIR="$pkgdir" ninja install -C build
}